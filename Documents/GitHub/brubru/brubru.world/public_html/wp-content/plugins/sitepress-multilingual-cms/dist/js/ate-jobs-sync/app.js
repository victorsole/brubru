!function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={2:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackWPML=window.webpackWPML||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([1278,0]),n()}({105:function(t,e,n){},106:function(t,e,n){},1247:function(t,e,n){},1248:function(t,e,n){},1251:function(t,e,n){},1252:function(t,e,n){},1253:function(t,e,n){},1254:function(t,e,n){},1255:function(t,e,n){},1278:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"getCounts",(function(){return te}));var r={};n.r(r),n.d(r,"get",(function(){return ae}));var o=n(3),s=n.n(o),i=n(7),c=n.n(i),u=n(63),l=n(30),d=n.n(l),f=n(202),p=n(449),b=n(48),m=n(201),h=n(51),g=n(71),v=n(398),y=n(875),j=n(121),w=n(874),O=n(877),E=n(39),k=n(1),S=n(127),_=n(16),C=n(148),T=function(){return f.a("",["urls","currentUrl"],ate_jobs_sync||{})},x=["otgs-ico-add","otgs-ico-refresh"].map(p.a("i.")).join(", "),A=function(t){t.classList.forEach((function(e){e.startsWith("otgs-ico-")&&t.classList.replace(e,"otgs-ico-refresh-spin")})),Object(C.b)(t,Object(k.a)("Sending for translation","sitepress"))},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(t=t||document).querySelectorAll('.js-wpml-translate-link[data-auto-translate="1"]')},P=function(t,e){var n=b.a(m.a(h.a("type","childList")),g.a((function(t){return d()(t.addedNodes)})),v.a(),y.a((function(t){return"icl_translate_options"===t.id})))(t);J(I(n)),e.disconnect()},N=function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i,c,u,l,d,f,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:5e3,a=e.currentTarget,r=a.dataset.trid,o=a.dataset.language,i=a.querySelector(x),e.preventDefault(),a.removeEventListener("click",N),A(i),c=j.a(["endpoints","auto-translate"],ate_jobs_sync),t.next=11,Object(_.a)(c,{trid:r,language:o,currentUrl:T()});case 11:if(u=t.sent,l=u.data,d=l.success,f=l.data,!d||!f){t.next=25;break}if(f=w.a({jobId:O.a(parseInt),automatic:O.a(parseInt)},f),a.dataset.tmJobId=f.jobId,a.dataset.shouldAteSync=1,!h.a("automatic",1,f)){t.next=24;break}return t.next=22,Object(S.a)((function(){return D()}),n);case 22:t.next=25;break;case 24:window.location.href=E.a("editUrl",f);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.wpmlAteStatusBarStore.getActions().synchronizeJobs());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=c()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("publish"===e.postStatus&&!e.triggeredByDuplication){t.next=2;break}return t.abrupt("return");case 2:if((n=d()(I())).map((function(t){return t.querySelector("i")})).forEach(A),!n.length){t.next=6;break}return t.abrupt("return",D());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||I();e.forEach((function(t){t.querySelector(x)&&t.addEventListener("click",N)}))},R=function(){if(!I().length){var t=document.getElementById("icl_div");if(t)new MutationObserver(P).observe(t,{childList:!0,subtree:!0})}ate_jobs_sync.isAutomaticTranslations&&(J(),document.addEventListener("WPMLLanguagesMetaBoxesRefreshed",(function(t){return L(t.detail)})))},B=n(0),M=n.n(B),W=n(34),F=n.n(W),q=n(2),U=n(82),G=Object(U.a)(),H=(n(1247),n(847)),V=n(13),K=n.n(V),z=function(t,e){var n="function"==typeof t,a="function"==typeof e;if(n||a){var r=function(t,e,n){return t[e].forEach((function(t){var e;null!==(e=t.classList)&&void 0!==e&&e.contains("issue-solving-backdrop")&&n()}))},o=new MutationObserver((function(s){s.forEach((function(s){n&&r(s,"addedNodes",t),r(s,"removedNodes",(function(){a&&e(),o.disconnect()}))}))}));return o.observe(document.getElementById("wpml-ate-console-container"),{subtree:!0,childList:!0}),o}},Y=n(1313);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q=function(t,e,n,a){return new Promise((function(r,o){var i,u=n.url,l=n.params;a(u,X(X(X({},l),e),{},{onIssueSolvingClose:(i=c()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().catch((function(t){o(t)}));case 2:r(!0);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}))}))};function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var et=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=l.length>2&&void 0!==l[2]&&l[2],ate_jobs_sync&&Object(Y.a)("ateConsole",ate_jobs_sync)&&Object(H.a)(["urls","ateConsole"],ate_jobs_sync)){t.next=4;break}throw console.log("ateLoadWidget: Missing necessary system data."),Error("System error.");case 4:if(head&&"function"==typeof head.js){t.next=7;break}throw console.error("head.js is not available."),Error("System error.");case 7:if(r=ate_jobs_sync.ateConsole,a){t.next=12;break}delete r.job_list,t.next=17;break;case 12:return t.next=14,Object(_.a)(ate_jobs_sync.endpoints.getATEJobsToSync,{});case 14:o=t.sent,i=o.data.data,r.job_list=i;case 17:return c={url:ate_jobs_sync.urls.ateConsole,params:r},u={translation_mode:ate_jobs_sync.isAutomaticTranslations?"everything":"something"},t.abrupt("return",Q(e,tt(tt({},u),n),c,(function(t,e){return head.js(t,(function(){if("function"!=typeof LoadEateWidget)throw console.log("LoadEateWidget is not available."),Error("System error.");LoadEateWidget(e)}))})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();var nt=!1,at=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.onIssueSolved,r=e.onAteWidgetAppears,o=e.onAteWidgetDisappears,i=e.params,u=void 0===i?{}:i,!nt){t.next=3;break}return t.abrupt("return");case 3:return nt=!0,l="function"==typeof a?a:function(){},z(r,(function(){nt=!1,"function"==typeof o&&o()})),t.prev=7,t.next=10,n(c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:nt=!1,l();case 2:case"end":return t.stop()}}),t)}))),u,!0);case 10:t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(7),nt=!1,t.t0;case 16:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e,n){return t.apply(this,arguments)}}();function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var st=function(t){var e=t.onIssueSolved,n=t.onAteWidgetAppears,a=t.onAteWidgetDisappears,r=t.params;return at({onIssueSolved:e,onAteWidgetAppears:n,onAteWidgetDisappears:a,params:ot(ot({},void 0===r?{}:r),{},{widget_mode:"issue_solving"})},et)},it=function(t){return{label:Object(k.a)("Fix it","sitepress"),onClick:t}},ct=n(1316),ut=Object(k.a)("Automatic translation status","sitepress"),lt=Object(k.a)("No translations in the queue","sitepress"),dt=Object(k.a)("Translate Everything Automatically","sitepress"),ft=Object(k.a)("Translate Everything Automatically is active","sitepress"),pt=(Object(k.a)("Translate Everything Automatically is paused","sitepress"),Object(k.a)("Translate Everything Automatically is stopped","sitepress")),bt=Object(k.a)("Out of Credits for Automatic Translation","sitepress"),mt=Object(k.a)("Preparing content for translation","sitepress"),ht=Object(k.a)("Preparing more content for translation","sitepress"),gt=Object(k.a)("An error occured, fix it to continue.","sitepress"),vt=Object(k.a)("There is an issue with automatic translation that needs your attention. Fix it to continue.","sitepress"),yt=function(){var t=Object(q.h)((function(t){return t.isAutomaticTranslations})),e=Object(q.h)((function(t){return t.notEnoughCredit})),n=Object(q.h)((function(t){return t.accountBalances})),a=Object(q.g)((function(t){return t.afterIssueSolving})),r=Object(q.g)((function(t){return t.notificationCenter})),o=r.updateNotification,s=r.removeNotification;return Object(B.useEffect)((function(){var r,i,c=function(){s("no-credits-admin-bar"),s("no-credits")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),st({onIssueSolved:function(){c(),a()},onAteWidgetDisappears:function(){return n(!1)}})};e?(t?o({id:"no-credits-admin-bar",notification:{title:pt,important:!0,highlight:!0,isError:!0,error:gt,actions:[it(u)]}}):n&&n.account_balance>0?o({id:"no-credits-admin-bar",notification:{title:bt,important:!0,highlight:!0,isError:!0,error:(i=n.account_balance,Object(ct.a)(Object(k.c)(Object(k.b)("You have <b>1</b> prepaid translation credit in your wpml.org account. Assign these credits to your site to start using automatic translation","You have <b>%s</b> prepaid translation credits in your wpml.org account. Assign these credits to your site to start using automatic translation",i,"sitepress"),i),{b:M.a.createElement("b",null)})),actions:[(r=u,{label:Object(k.a)("Assign credits now","sitepress"),onClick:r})]}}):o({id:"no-credits-admin-bar",notification:{title:bt,important:!0,highlight:!0,isError:!0,error:gt,actions:[it(u)]}}),o({id:"no-credits",notification:{title:vt,highlight:!0,isError:!0,showOnStatusBar:!1,showOnDashboard:!t,showOnPauseControl:t,actions:[{applyToCompleteNotification:!0,onClick:u}]}})):c()}),[e,n]),null},jt=function(){var t,e,n=Object(q.h)((function(t){return t.needsReviewCount})),a=Object(q.g)((function(t){return t.notificationCenter})),r=a.updateNotification,o=a.removeNotification,s=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.translationQueue,i="string"==typeof s&&s.length;return Object(B.useEffect)((function(){var t;n&&n>0?r({id:"jobs-to-review",notification:{title:(t=n,Object(k.c)(Object(k.b)("%d translation waiting for review","%d translations waiting for review",t,"sitepress"),t)),order:20,showOnDashboard:!0,actions:i?[{applyToCompleteNotification:!0,onClick:function(){return window.location.assign(s)}}]:[]}}):o("jobs-to-review")}),[n]),null},wt=n(9),Ot=n.n(wt),Et=n(399),kt=function(){var t,e,n=Object(q.h)((function(t){return t.isAutomaticTranslations})),a=Object(q.h)((function(t){return t.languages.primary})),r=Object(q.h)((function(t){return t.languages.isPrimaryEligibleForAutomaticTranslation})),o=Object(q.h)((function(t){return t.languages.secondariesNotEligibleForAutomaticTranslation})),s=Object(q.g)((function(t){return t.notificationCenter})),i=s.updateNotification,c=s.removeNotification,u=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.editLanguages,l="string"==typeof u&&u.length,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unsupported-languages";return i({id:n,notification:{title:t,important:!0,highlight:!0,isError:!0,showOnDashboard:!e,showOnPauseControl:e,actions:l?[{applyToCompleteNotification:!0,onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),window.location.assign(u)}}]:[]}})};return Object(B.useEffect)((function(){if(r){var t,e;if(o.length>0){var s=Et.a(h.a("mapping",a.code),o),i=Ot()(s,2),u=i[0],l=i[1];return u.length>0&&d((e=u.map((function(t){return t.english_name})),Object(k.c)(Object(k.a)("Content in those languages: %s, cannot be automatically translated unless you map them to a language that's different from the default.","sitepress"),e.join(", "))),!1,"mapping-the-same-as-default"),void(l.length>0&&d(function(t){return Object(k.c)(Object(k.b)("Your language, %s, must be mapped to a supported language in order to use automatic translation.","The following languages on your site must be mapped to a supported language in order to use automatic translation: %s",t.length,"sitepress"),t.join(", "))}(l.map((function(t){return t.english_name})))))}c("unsupported-languages"),c("mapping-the-same-as-default")}else d((t=a.english_name,Object(k.c)(Object(k.a)("Your default language, %s, must be mapped to a supported language in order to use automatic translation.","sitepress"),t)),n)}),[r,o]),null},St=function(){var t=Object(q.h)((function(t){return t.notEnoughCredit})),e=Object(q.h)((function(t){return t.needsReviewCount})),n=e&&e>0,a=function(){return t?M.a.createElement(yt,null):M.a.createElement(kt,null)};return M.a.createElement(M.a.Fragment,null,!!n&&M.a.createElement(jt,null),M.a.createElement(a,null))},_t=n(31),Ct=n.n(_t),Tt=function(t){var e=t.title,n=t.highlight,a=void 0!==n&&n,r=t.dotIcon,o=void 0!==r&&r,s=t.info,i=void 0===s?null:s,c=t.infoIsLoading,u=void 0!==c&&c,l=t.actions,d=void 0===l?[]:l,f=Object(q.g)((function(t){return t.notificationCenter})),p=f.updateNotification,b=f.removeNotification,m=Object(q.h)((function(t){return t.automaticJobsInProgress})),h=Object(q.h)((function(t){return t.automaticJobsInProgressTotal})),g=Object(q.h)((function(t){return t.automaticJobsStatus})),v=Object(q.h)((function(t){return t.shouldTranslateEverything}));return Object(B.useEffect)((function(){if("problem"!==g){var t;if(!v&&h>0&&m){var n=h-m,r=Math.round(m/100);t={itemsCompleted:n,itemsTotal:h,percentage:n>0?100/h*n:0,minutesToComplete:r}}p({id:"automatic-translation",notification:{title:e,highlight:a,dotIcon:o,info:i,infoIsLoading:u,task:{isActive:!0,progress:t},actions:d}})}else b("automatic-translation")}),[g,m,h]),null},xt=function(){var t=Object(q.h)((function(t){return t.automaticJobsInProgressTotal})),e=Object(q.h)((function(t){return t.automaticJobsInProgress})),n=Object(q.h)((function(t){return t.shouldTranslateEverything})),a=null,r=!1;n&&(a=t>0?ht:mt,r=!0);var o=e&&!n?dt:ft;return M.a.createElement(Tt,Ct()({highlight:!0},{title:o,info:a,infoIsLoading:r}))},At=function(){var t=Object(q.h)((function(t){return t.isAutomaticTranslations})),e=Object(q.h)((function(t){return t.languages.readyForAutomaticTranslation})),n=function(){return t&&e?M.a.createElement(xt,null):null};return M.a.createElement(M.a.Fragment,null,M.a.createElement(n,null))},It=function(){var t=Object(q.h)((function(t){return t.automaticJobsInProgress})),e=ut,n=t?null:lt;return M.a.createElement(Tt,Ct()({dotIcon:!0},{title:e,info:n}))},Pt=function(){return Object(q.h)((function(t){return t.isAutomaticTranslations}))?null:M.a.createElement(It,null)},Nt=function(){var t=Object(q.h)((function(t){return t.minimumRequirements.items})),e=Object(q.h)((function(t){return t.minimumRequirements.supportPageUrl})),n=Object(q.g)((function(t){return t.notificationCenter})),a=n.updateNotification,r=n.removeNotification;return Object(B.useEffect)((function(){void 0!==t&&(t.length>0?a({id:"minimum-requirements",notification:{title:Object(k.a)("Your site doesn't meet WPML's minimum requirements","sitepress"),order:5,highlight:!0,isError:!0,showOnStatusBar:!0,actions:[{label:Object(k.a)("Fix it","sitepress"),onClick:function(t){window.location.href=e}}]}}):r("minimum-requirements"))}),[t,r,e,a]),null},Dt=n(8),Lt=n.n(Dt),Jt=(n(1248),function(t){var e,n,a=t.context,r=t.notification,o=r.title,s=r.important,i=r.actions,c=r.highlight,u=r.dotIcon,l=r.isError,d=r.error,f=r.info,p=r.infoIsLoading,b=r.task,m=(b=void 0===b?{}:b).isActive,h=b.progress,g=(h=void 0===h?{}:h).percentage,v=h.itemsCompleted,y=h.itemsTotal,j=h.minutesToComplete,w=Object(B.useState)(!1),O=Ot()(w,2),E=O[0],S=O[1];if(Object(B.useEffect)((function(){if(o&&s){var t=document.getElementById("wpml-status-bar-icon");t&&!t.classList.contains("wpml-status-bar-icon--shaking")&&(t.classList.add("wpml-status-bar-icon--shaking"),document.getElementById("wp-admin-bar-ate-status-bar").addEventListener("mouseover",(function(){return t.classList.remove("wpml-status-bar-icon--shaking")})))}}),[o,s]),!o)return null;var _=function(t,e,n,a,r,o){return t&&e?e:n?a?M.a.createElement("span",{className:"wpml-notification-description-subtitle--loading"},n):n:(null!==r&&r>=0&&r<=100&&(s="".concat(r,"%")),o>=0&&(o=o>0?Object(k.c)(Object(k.a)("%d min remaining","sitepress"),o):Object(k.a)("less than 1 min remaining","sitepress"),s=s?"".concat(s,", ").concat(o):o),s);var s}(l,d,f,p,g=g||"0"==g?parseInt(g):void 0,j),C=Lt()("wpml-notification-container",{"wpml-notification-container--status-bar":"status-bar"===a,"wpml-notification-container--dashboard":"dashboard"===a,"wpml-notification-container--with-subtitle":_,"wpml-notification-container--highlight":c,"wpml-notification-container--error":l,"wpml-notification-container--active":!0===m,"wpml-notification-container--inactive":!1===m});if(E)e=M.a.createElement("i",{className:"otgs-ico otgs-ico-spinner"});else if(u)e=M.a.createElement("i",{className:"wpml-notification-status-icon-dot"});else switch(m){case!0:e=M.a.createElement("i",{className:"otgs-ico otgs-ico-play"});break;case!1:e=M.a.createElement("i",{className:"otgs-ico otgs-ico-pause"});break;default:e=M.a.createElement("i",{className:"otgs-ico otgs-ico-bell"})}null!==v&&null!==y&&v>=0&&y>=v&&(n="".concat(v," / ").concat(y));var T=null!==g&&g>=0&&g<=100,x=Array.isArray(i)?i.find((function(t){return t.applyToCompleteNotification})):null,A=x?{className:"wpml-notification wpml-notification--clickable",onClick:function(){return x.onClick({setLoading:S})}}:{className:"wpml-notification"},I=x&&"dashboard"===a;return M.a.createElement("div",{className:C},E&&M.a.createElement("div",{className:"wpml-notification-loading"}),M.a.createElement("div",A,M.a.createElement("div",{className:"wpml-notification-status"},e),M.a.createElement("div",{className:"wpml-notification-description"},M.a.createElement("div",{className:"wpml-notification-description-title"},o,n&&M.a.createElement("span",{className:"wpml-notification-description-title-items"},"Â  ",M.a.createElement("span",null,n))),_&&M.a.createElement("div",{className:"wpml-notification-description-subtitle"},_)),i&&M.a.createElement("div",{className:"wpml-notification-actions"},I&&M.a.createElement("span",{className:"wpml-notification-actions-arrow-link"},M.a.createElement("svg",{width:"13",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.a.createElement("path",{d:"M.253 3.87a.834.834 0 01.595-.258h8.255L7.048 1.505a.875.875 0 01-.253-.622.897.897 0 01.253-.622A.844.844 0 017.651 0a.822.822 0 01.602.26l3.5 3.615c.16.168.25.395.25.63 0 .236-.09.462-.25.63l-3.5 3.615a.846.846 0 01-1.39-.286.903.903 0 01.185-.959l2.055-2.132H.848a.831.831 0 01-.473-.15.873.873 0 01-.312-.396.905.905 0 01.19-.957z"}))),i.map((function(t){var e=t.label,n=t.onClick,a=t.icon;return"string"!=typeof e||"function"!=typeof n?null:M.a.createElement("button",{key:e,type:"button",className:"ant-btn wpml-antd-button",onClick:function(){return n({setLoading:S})}},M.a.createElement("span",null,e),a&&M.a.createElement("i",{className:"otgs-ico otgs-ico-".concat(a)}))})))),T&&M.a.createElement("div",{className:"wpml-notification-progress-bar"},M.a.createElement("div",{className:"wpml-notification-progress-bar-progress",style:{width:"".concat(g,"%")}})))}),Rt=function(t){var e=t.context,n=void 0===e?"status-bar":e,a=Object(q.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsStatusBar)||[]})),r=Object(q.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsDashboard)||[]})),o="status-bar"===n?a:r;return M.a.createElement(M.a.Fragment,null,Object.keys(o).map((function(t){return M.a.createElement(Jt,{key:t,notification:o[t],context:n})})))},Bt=function(t){var e=t.showNotifications,n=t.showAteNotifications,a=t.showMinRequirementsNotification,r=Object(q.g)((function(t){return t.backgroundTasks})).startRunner;return Object(B.useEffect)((function(){r()}),[]),M.a.createElement("div",{className:"wpml-status-bar",style:{width:"100%"}},e&&M.a.createElement(Rt,{context:"status-bar"}),a&&M.a.createElement(Nt,null),n&&M.a.createElement(At,null),n&&M.a.createElement(Pt,null),n&&M.a.createElement(St,null))},Mt=function(){return M.a.createElement("span",{className:"wpml-status-bar-in-progress"},M.a.createElement("i",{className:"otgs-ico otgs-ico-in-progress"}))},Wt=function(){var t=Object(B.useState)(!1),e=Ot()(t,2),n=e[0],a=e[1],r=Object(q.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.inProgress)||!1})),o=Object(q.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsStatusBar)||[]})),s=Object.keys(o).filter((function(t){return o[t].highlight||o[t].isError||o[t].important})).length;Object(B.useEffect)((function(){var t=function(t){a(t.detail.status||!1)};return document.addEventListener("statusBarNotification",t),function(){document.removeEventListener("statusBarNotification",t)}}),[a]);var i=r||n,c=s>0&&!i;return M.a.createElement(M.a.Fragment,null,i&&M.a.createElement(Mt,null),c&&M.a.createElement("span",{className:"wpml-badge-number"},s))},Ft=n(448),qt=n(166),Ut=n(1311),Gt=n(437),Ht=n(60),Vt=n(36),Kt=(n(1249),n(431)),zt=n(88),Yt=n(423),Zt=n(846),Xt=n(873),Qt=function(t,e){return!Zt.a(u.a([],t,e))},$t=function(t){return c()(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={};case 1:return e.next=3,t.retry(Xt.a(["jobsToProcess"],n));case 3:n=e.sent,Qt("processed",n);case 5:if(Qt("jobsToProcess",n)){e.next=1;break}case 6:case"end":return e.stop()}}),e)})))},te=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i,c,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(e=window)||void 0===e||null===(n=e.ate_jobs_sync)||void 0===n||null===(a=n.endpoints)||void 0===a?void 0:a.untranslatedCount){t.next=3;break}throw new Error("ate_jobs_sync does not contain endpoint untranslatedCount");case 3:return t.next=5,Object(_.a)(r,{});case 5:if(o=t.sent,i=o.data,c=i.success,u=i.data,c){t.next=11;break}throw Error(u);case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ee=function(){var t,e,n,a=null===(t=window)||void 0===t||null===(e=t.ate_jobs_sync)||void 0===e||null===(n=e.endpoints)||void 0===n?void 0:n.languages;if(!a)throw Error("ate_jobs_sync does not contain endpoint languages");return Object(_.a)(a,{})},ne={},ae=function(){var t=c()(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("languages"in ne)){t.next=2;break}return t.abrupt("return",ne.languages);case 2:return t.next=4,ee();case 4:if(e=t.sent,n=e.data,a=n.success,r=n.data,a){t.next=10;break}throw Error(r);case 10:if(0!==r.length){t.next=12;break}return t.abrupt("return",[]);case 12:return ne.languages=r,t.abrupt("return",ne.languages);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=n(61),oe=n.n(re),se={untranslatedCounts:{},setUntranslatedCounts:Object(q.b)((function(t,e){t.untranslatedCounts=e&&"object"===oe()(e)?Object.fromEntries(Object.entries(e).filter((function(t){var e=Ot()(t,2);e[0];return(+e[1]||0)>0}))):{}})),untranslatedElementsCount:Object(q.c)((function(t){return Object.keys(t.untranslatedCounts).length})),fetchUntranslatedContentCounts:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.untranslatedContentService,t.next=4,o.getCounts();case 4:i=t.sent,e.setUntranslatedCounts(i);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},ie=n(387),ce=function(t){return{all:t,setAll:Object(q.b)((function(t,e){t.all=e})),primary:Object(q.c)((function(t){return Object(y.a)(Object(E.a)("is_default"),(null==t?void 0:t.all)||[])})),isPrimaryEligibleForAutomaticTranslation:Object(q.c)((function(t){return t.primary&&t.primary.can_be_translated_automatically})),secondaries:Object(q.c)((function(t){return Object(ie.a)(Object(E.a)("is_default"),t.all)})),secondariesNotEligibleForAutomaticTranslation:Object(q.c)((function(t){return Object(ie.a)(Object(E.a)("can_be_translated_automatically"),t.secondaries)})),readyForAutomaticTranslation:Object(q.c)((function(t){return t.isPrimaryEligibleForAutomaticTranslation&&t.secondaries.length>t.secondariesNotEligibleForAutomaticTranslation.length})),fetchLanguages:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.languagesService,t.prev=2,t.next=5,o.get();case 5:i=t.sent,e.setAll(i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,a){return t.apply(this,arguments)}}())}};function ue(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pe={notifications:{},notificationsStatusBar:Object(q.c)((function(t){return Object(m.a)((function(t){var e=t.showOnStatusBar;return void 0===e||e}),t.notifications)})),notificationsDashboard:Object(q.c)((function(t){return Object(m.a)(Object(E.a)("showOnDashboard"),t.notifications)})),notificationsPauseControl:Object(q.c)((function(t){return Object(m.a)(Object(E.a)("showOnPauseControl"),t.notifications)})),inProgress:Object(q.c)((function(t){return Object.values(t.notifications).some((function(t){return t.inProgress}))})),removeNotification:Object(q.b)((function(t,e){delete t.notifications[e]})),updateNotification:Object(q.b)((function(t,e){var n=e.id,a=e.notification,r=fe(fe({},t.notifications[n]||{}),a);r.inProgress=!1,r.task&&r.task.isActive&&r.task.progress&&(0===r.task.progress.percentage||r.task.progress.percentage&&r.task.progress.percentage>-1&&r.task.progress.percentage<100||(r.task.progress.itemsCompleted>0||0===r.task.progress.itemsCompleted)&&r.task.progress.itemsTotal>0&&r.task.progress.itemsCompleted<r.task.progress.itemsTotal||0===r.task.progress.minutesToComplete||r.task.progress.minutesToComplete>0)&&(r.inProgress=!0);var o=fe(fe({},t.notifications),{},K()({},n,r));if(t.notifications[n]&&t.notifications[n].highlight===r.highlight&&t.notifications[n].task===r.task&&t.notifications[n].order===r.order)JSON.stringify(t.notifications)!==JSON.stringify(o)&&(t.notifications=o);else{var s,i={},c=ue(Object.keys(o).sort((function(t,e){var n=o[t].order?o[t].order:10,a=o[e].order?o[e].order:10,r=o[t].highlight?1:0,s=o[e].highlight?1:0,i=o[t].task?1:0,c=o[e].task?1:0;return n-a||s-r||c-i})));try{for(c.s();!(s=c.n()).done;){var u=s.value;i[u]=o[u]}}catch(t){c.e(t)}finally{c.f()}t.notifications=i}}))};function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var he={endpoints:{},tasks:{},updateTask:Object(q.b)((function(t,e){e.endpointClass;var n=e.taskData,a=t.tasks;t.tasks=a.map((function(t){return t.taskId===n.taskId?me(me({},t),n):t}))})),startRunner:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,c,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.getState,o=r(),i=o.endpoints,c=o.tasks,t.next=4,e.updateNotifications({});case 4:for(u in c)l=c[u],d=Object(y.a)(Object(h.a)("endpoint",l.taskType),i),l.hasLock&&!l.isPaused&&e.runTask({endpointObject:d,task:l});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),runTask:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpointObject,r=n.task,t.next=3,Object(_.a)(a,r);case 3:if(o=t.sent,i=o.data,c=i.success,u=i.data,l=void 0!==u&&!0===u.isCompleted,c&&(e.updateTask({endpointClass:a.endpoint,taskData:u}),e.updateNotifications({})),!c||!u||l||u.isPaused){t.next=10;break}return t.next=10,e.runTask({endpointObject:a,task:u});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),updateNotifications:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.getState,o=a.getStoreActions,i=r(),c=i.tasks,Object.keys(c).forEach((function(t){var e=c[t],n=e.description,a=e.progressDone,r=e.progressTotal,s=e.isPaused;e.isDisplayed&&o().notificationCenter.updateNotification({id:e.taskId,notification:{title:n||"Background task in progress...",actions:[],task:{isActive:!s,progress:{itemsCompleted:a,itemsTotal:r,percentage:r>0?parseInt(100*a/r):null}}}})}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},ge=n(15),ve=n.n(ge),ye=n(18),je=n.n(ye),we=n(87),Oe=n.n(we),Ee=n(522),ke=n.n(Ee),Se=n(14),_e=n(68);var Ce=function(t){return t.preventDefault(),!1};function Te(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),Object(C.a)(t,"otgs")}var xe=new WeakMap,Ae=new WeakMap,Ie=new WeakMap,Pe=function(){function t(e){ve()(this,t),xe.set(this,{writable:!0,value:void 0}),Ae.set(this,{writable:!0,value:void 0}),Ie.set(this,{writable:!0,value:void 0}),K()(this,"jobId",void 0),K()(this,"status",void 0),ke()(this,xe,e),this.jobId=parseInt(e.dataset.tmJobId),ke()(this,Ae,e.querySelector("i")),ke()(this,Ie,Oe()(this,Ae).dataset.originalTitle),this.status=Se.b.IN_PROGRESS}return je()(t,[{key:"turnIntoSpinning",value:function(){Oe()(this,Ae).classList.replace("otgs-ico-in-progress","otgs-ico-refresh-spin"),Te(Oe()(this,Ae),Object(k.a)("Refreshing translation status","sitepress")),Oe()(this,xe).addEventListener("click",Ce,!0)}},{key:"revertToInProgress",value:function(){Oe()(this,Ae).classList.replace("otgs-ico-refresh-spin","otgs-ico-in-progress"),Te(Oe()(this,Ae),Oe()(this,Ie)),Oe()(this,xe).removeEventListener("click",Ce,!0)}},{key:"turnIntoCompleted",value:function(t){Oe()(this,Ae).classList.replace("otgs-ico-refresh-spin",function(t){return t.status===Se.b.COMPLETED?Object(Se.h)(t)?"otgs-ico-needs-review":"otgs-ico-edit":"otgs-ico-in-progress"}(t)),Te(Oe()(this,Ae),t.label),Oe()(this,xe).dataset.shouldAteSync="0",Oe()(this,xe).href=t.viewLink,Oe()(this,xe).removeEventListener("click",Ce,!0),Object(Ht.a)("job-link-updated",t),this.status=Se.b.COMPLETED}},{key:"turnIntoInsufficientBalance",value:function(t,e){var n=this;Oe()(this,Ae).style.color=t?"#333":"#c1c1c1",Oe()(this,Ae).style.cursor=t?"pointer":"default",Oe()(this,Ae).classList.replace("otgs-ico-refresh-spin","otgs-ico-warning");var a=function(){var t=e.replace("CREDITS_ACTION","document.dispatchEvent(new Event('WPMLTooltipCreditsFixClicked'));"),a=Oe()(n,xe).dataset.tmEditorLink;return a?t.replace("TRANSLATE_LINK",a):t}();Te(Oe()(this,Ae),a),this.status=Se.a.NO_CREDIT}}]),t}();var Ne=_e.a(2,(function(t,e){return t.find((function(t){return t.jobId===e.jobId}))})),De=function(){function t(e,n,a){ve()(this,t),this.getJobsInfo=e,this.isTranslationManager=n,this.notEnoughCreditPopup=a}var e;return je()(t,[{key:"startSyncing",value:function(t){this.jobs=t,this.jobs.forEach((function(t){return t.turnIntoSpinning()}))}},{key:"markAsInsufficientBalanced",value:function(t){var e=this;t.map(Ne(this.jobs)).filter((function(t){return t})).forEach((function(t){return t.turnIntoInsufficientBalance(e.isTranslationManager,e.notEnoughCreditPopup)}))}},{key:"finishSyncIteration",value:(e=c()(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=this.jobs.filter((function(t){return t.status===Se.b.IN_PROGRESS}))).length>0)){t.next=12;break}return t.prev=2,t.next=5,this.getJobsInfo(e.map((function(t){return t.jobId})));case 5:n=t.sent,e.forEach((function(t){var e=n.find((function(e){return e.jobId===t.jobId}));e&&e.status===Se.b.COMPLETED&&t.turnIntoCompleted(e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return e.apply(this,arguments)})},{key:"revertRemainingJobsToInProgress",value:function(){this.jobs.forEach((function(t){t.status===Se.b.IN_PROGRESS&&t.revertToInProgress()}))}}]),t}();function Le(){var t,e,n,a,r,o,i,u;return new De((i=null===(t=ate_jobs_sync)||void 0===t||null===(e=t.endpoints)||void 0===e?void 0:e.getJobsInfo,u=null===(n=ate_jobs_sync)||void 0===n||null===(a=n.urls)||void 0===a?void 0:a.currentUrl,function(){var t=c()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)(i,{jobIds:e,returnUrl:u});case 2:if((n=t.sent).data.success){t.next=5;break}throw n.data.data;case 5:return t.abrupt("return",n.data.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),null===(r=ate_jobs_sync)||void 0===r?void 0:r.isTranslationManager,null===(o=ate_jobs_sync)||void 0===o?void 0:o.notEnoughCreditPopup)}var Je=n(383);function Re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(n),!0).forEach((function(e){K()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Me=function(t){var e=t.anyJobsExist,n=t.jobsToSyncCount,o=t.automaticJobsInProgressTotal,i=t.needsReviewCount,l=t.languages,p=t.endpoints,b=t.ateAPI,m=t.isAutomaticTranslations,h=t.shouldTranslateEverything,g=t.isAteActive,v=t.ateConsole,y=t.backgroundTasksData,j=t.repeatTimeouts,w=void 0===j?{sync:5e3,syncDelayed:1e4,syncIsLockedDelay:3e4,translateEverythingInUse:12e4,translateEverythingWaiting:3e4,translateEverythingWaitingForMediaSetup:2e3}:j,O=t.minimumRequirements,k=void 0===O?{items:[],supportPageUrl:""}:O,C={anyJobsExist:!!e,isAutomaticTranslations:!!m,jobsToSyncCount:parseInt(n),automaticJobsInProgressTotal:parseInt(o),automaticJobsInProgress:parseInt(o),needsReviewCount:parseInt(i),endpoints:p,credits:null,minimumRequirements:k,fetchingCredits:!1,accountBalances:null,shouldTranslateEverything:"1"==h,notEnoughCredit:!1,notifications:{},shouldUseStatusUpdater:!0,automaticJobsStatus:Object(q.c)((function(t){return Object(Ft.a)([[function(){return t.notEnoughCredit},Object(qt.a)("problem")],[function(){return t.automaticJobsInProgress>0},Object(qt.a)("inProgress")],[function(){var e;return!(null!=t&&null!==(e=t.languages)&&void 0!==e&&e.readyForAutomaticTranslation)},Object(qt.a)("problem")],[function(){return 0===t.automaticJobsInProgress},Object(qt.a)("complete")],[Object(qt.a)(!0),Object(qt.a)(null)]])(t)})),synchronizeJobs:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,u,l,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,!g){t.next=5;break}return o=$t(b),t.next=5,o();case 5:return i=r().shouldUseStatusUpdater?Le():null,u=new Je.a(p.getJobsCount),l=function(){var t=c()(s.a.mark((function t(n){var a,o,i,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(a=r().jobsToSyncCount-n.length)<0?0:a,e.setJobsToSyncCount(a),o=n.filter((function(t){return t.needsReview})).length,i=r().needsReviewCount+o,e.setNeedsReviewCount(i),c=n.filter((function(t){return t.automatic})).length,u=(u=r().automaticJobsInProgress-c)<0?0:u,e.setAutomaticJobsInProgress(u),l={allCount:a,allAutomaticCount:u,needsReviewCount:i},Object(Ht.a)("ate-jobs-count-updated",l),Object(Ht.a)("ate-jobs-downloaded",n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=new Yt.a({synchronize:function(t){return b.sync(t)},download:function(t,e){return b.download(t,e)},releaseLock:function(t){return Object(_.a)(p.syncLock,{action:"release",lockKey:t})},getJobsCount:u,listeners:{onSyncStart:[function(){return i&&i.startSyncing(d()(document.querySelectorAll('.js-wpml-translate-link[data-should-ate-sync="1"]')).map((function(t){return new Pe(t)})))}],onInsufficientBalance:[function(){return e.setNotEnoughCredit(!0)},function(t){return i&&i.markAsInsufficientBalanced(t)}],onDownloadedChunk:[l,function(){var t=c()(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>0&&n%5==0&&i)){t.next=3;break}return t.next=3,i.finishSyncIteration();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()],onSyncDownloadCycleCompleted:[function(t,n){return e.setJobsToSyncCount(t.allCount),e.setAutomaticJobsInProgress(t.allAutomaticCount),e.setNeedsReviewCount(t.needsReviewCount),Object(Ht.a)("ate-jobs-count-updated",t),Object(Ht.a)("ate-sync-cycle-completed",n),i&&i.finishSyncIteration()}],onSyncDownloadCompleted:[function(){return i&&i.revertRemainingJobsToInProgress()}]},repeatTimeouts:{sync:w.sync,syncDelayed:w.syncDelayed,syncIsLockedDelay:w.syncIsLockedDelay}}),t.abrupt("return",f.syncAndDownload());case 10:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),translateEverything:Object(q.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i,c,l,d=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"",a=d.length>2?d[2]:void 0,r=a.getState,Object(Ht.a)("translate-everything-running",!0),t.next=5,Object(_.a)(Object(E.a)("translate-everything",p),{key:n});case 5:if(o=t.sent,i=o.data,c=i.success,l=i.data,!c){t.next=20;break}if(Object(Ut.a)(Object(u.a)([],"createdJobs",l))||(e.setAutomaticJobsInProgressTotal(r().automaticJobsInProgressTotal+l.createdJobs.length),e.setAutomaticJobsInProgress(r().automaticJobsInProgress+l.createdJobs.length),e.setJobsToSyncCount(r().jobsToSyncCount+l.createdJobs.length),Object(Ht.a)("translate-everything-jobs-created",l.createdJobs)),!l.key){t.next=13;break}return t.abrupt("return",e.translateEverything(l.key));case 13:if(e.setShouldTranslateEverything(!1),Object(Ht.a)("translate-everything-running",!1),!(r().jobsToSyncCount+l.createdJobs.length>0)){t.next=17;break}return t.abrupt("return",Promise.all([e.fetchCredits(),e.synchronizeJobs()]));case 17:return t.abrupt("return",e.fetchCredits());case 20:if("in-use"!==l.key){t.next=24;break}return t.abrupt("return",Object(S.a)(e.translateEverything,w.translateEverythingInUse));case 24:if("waiting"!==l.key){t.next=28;break}return t.abrupt("return",Object(S.a)(e.translateEverything,w.translateEverythingWaiting));case 28:if("media-setup-not-finished"!==l.key){t.next=30;break}return t.abrupt("return",Object(S.a)(e.translateEverything,w.translateEverythingWaitingForMediaSetup));case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),fetchCredits:Object(q.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setFetchingCredits(!0),t.next=3,Object(_.a)(p.getCredits,{});case 3:return n=t.sent,a=n.data,t.next=7,Object(_.a)(p.getAccountBalances,{});case 7:r=t.sent,o=r.data,e.setFetchingCredits(!1),a.success&&!Object(f.a)(!1,["data","error"],a)&&e.setCredits(a.data),o.success&&!Object(f.a)(!1,["data","error"],o)&&e.setAccountBalances(o.data);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),setAutomaticJobsInProgressTotal:Object(Vt.a)("automaticJobsInProgressTotal"),setAutomaticJobsInProgress:Object(Vt.a)("automaticJobsInProgress"),setJobsToSyncCount:Object(Vt.a)("jobsToSyncCount"),setNeedsReviewCount:Object(Vt.a)("needsReviewCount"),setCredits:Object(q.b)((function(t,e){t.credits=e,Object(Ht.a)("ate-credits-updated",e)})),setAccountBalances:Object(q.b)((function(t,e){t.accountBalances=e})),setFetchingCredits:Object(Vt.a)("fetchingCredits"),setShouldTranslateEverything:Object(Vt.a)("shouldTranslateEverything"),setShouldUseStatusUpdater:Object(Vt.a)("shouldUseStatusUpdater"),setIsAutomaticTranslations:Object(Vt.a)("isAutomaticTranslations"),setNotEnoughCredit:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,n===r().notEnoughCredit){t.next=9;break}return t.next=4,Object(_.a)(p.getATEJobsToSync,{});case 4:return o=t.sent,i=o.data,v.job_list=i.data,e.setNotEnoughCreditAction(n),t.abrupt("return",e.fetchCredits());case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),afterIssueSolving:Object(q.e)(function(){var t=c()(s.a.mark((function t(e,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.getState,e.setNotEnoughCreditAction(!1),t.next=4,e.fetchCredits();case 4:return t.abrupt("return",e.synchronizeJobs());case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),setNotEnoughCreditAction:Object(q.b)((function(t,e){t.notEnoughCredit=e,Object(Ht.a)("ate-not-enough-credit",e)})),untranslatedContent:se,languages:ce(l),notificationCenter:pe,backgroundTasks:he};return Object(q.d)(C,{initialState:{backgroundTasks:y},injections:{untranslatedContentService:a,languagesService:r}})},We=function(){var t=c()(s.a.mark((function t(e){var n,a,r,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(Gt.a)(window.wpmlAteStatusBarStore)){t.next=2;break}return t.abrupt("return",window.wpmlAteStatusBarStore);case 2:if(Object(Gt.a)(window.wpmlAteStatusBarStoreInit)){t.next=14;break}n=0;case 4:if(!(n<100)){t.next=12;break}return t.next=7,Object(S.a)(Object(qt.a)(!0),100);case 7:if(Object(Gt.a)(window.wpmlAteStatusBarStore)){t.next=9;break}return t.abrupt("return",window.wpmlAteStatusBarStore);case 9:n++,t.next=4;break;case 12:return console.error("ATE status bar store initialization failed."),t.abrupt("return",null);case 14:return window.wpmlAteStatusBarStoreInit=!0,a=new Kt.a(new zt.a),r={tasks:"undefined"!=typeof wpml_background_tasks?Object(u.a)({},"tasks",wpml_background_tasks):{},endpoints:"undefined"!=typeof wpml_background_tasks?Object(u.a)({},"endpoints",wpml_background_tasks):{}},o=new Je.a(e.endpoints.getJobsCount),t.next=20,o.get(!1);case 20:return i=t.sent,e.jobsToSyncCount=i.allCount,e.automaticJobsInProgressTotal=i.allAutomaticCount,e.needsReviewCount=i.needsReviewCount,c=window.wpmlMinimumRequirements,window.wpmlAteStatusBarStore=Me(Be(Be({},e),{},{ateAPI:a,backgroundTasksData:r,minimumRequirements:c})),Object(E.a)("shouldTranslateEverything",e)?window.wpmlAteStatusBarStore.getActions().translateEverything():parseInt(Object(E.a)("jobsToSyncCount",e))>0&&window.wpmlAteStatusBarStore.getActions().synchronizeJobs(),Object(Ht.a)("ate-jobs-count-updated",{allCount:e.jobsToSyncCount,allAutomaticCount:e.automaticJobsInProgressTotal,needsReviewCount:e.needsReviewCount}),document.addEventListener("WPMLTooltipCreditsFixClicked",(function(){e.ateConsole&&st({onIssueSolved:function(){return window.wpmlAteStatusBarStore.getActions().afterIssueSolving()},onAteWidgetDisappears:function(){Object(Ht.a)("ate-issue-solved-popup-closed",!0)}})})),Object(Ht.b)("translate-everything-start").then((function(t){var e=t.shouldUseStatusUpdater,n=void 0===e||e;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(n),window.wpmlAteStatusBarStore.getActions().setShouldTranslateEverything(!0),window.wpmlAteStatusBarStore.getActions().translateEverything(),window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!0)})),Object(Ht.b)("translate-everything-stop").then((function(){window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!1)})),Object(Ht.b)("ate-sync-start").then((function(t){var e=t.createdTranslations,n=t.shouldUseStatusUpdater,a=void 0===n||n;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(a),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgressTotal(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgressTotal)+e.length),window.wpmlAteStatusBarStore.getActions().setJobsToSyncCount(parseInt(window.wpmlAteStatusBarStore.getState().jobsToSyncCount)+e.length),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgress(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgress)+e.length),window.wpmlAteStatusBarStore.getActions().synchronizeJobs()})),t.abrupt("return",window.wpmlAteStatusBarStore);case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Fe=function(){return ate_jobs_sync.isAutomaticTranslations||parseInt(ate_jobs_sync.needsReviewCount)>0||ate_jobs_sync.automaticJobsInProgressTotal>0},qe=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Ue=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i,c,u=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(u.length>0&&void 0!==u[0])||u[0],n=!(u.length>1&&void 0!==u[1])||u[1],t.next=4,qe(500);case 4:return t.next=6,We(ate_jobs_sync,G);case 6:a=t.sent,r=!function(){return 0===a.getState().minimumRequirements.items.length}(),Fe()||(n=!1),document.getElementById("wp-admin-bar-ate-status-bar").classList.remove("wpml-status-bar-hidden"),(o=document.getElementById("wpml-ate-status-bar-content")).previousSibling.style.display="none",F.a.render(M.a.createElement(q.a,{store:a},M.a.createElement(Bt,{showNotifications:e,showAteNotifications:n,showMinRequirementsNotification:r})),o),i=new Event("statusBarRendered"),o.dispatchEvent(i),c=document.getElementById("wp-admin-bar-ate-status-bar-badge"),F.a.render(M.a.createElement(q.a,{store:a},M.a.createElement(Wt,null)),c);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ge=n(49),He=n.n(Ge),Ve=(n(56),n(595)),Ke=n.n(Ve),ze=(n(839),function(t){var e=t.isAdminBar,n=void 0!==e&&e,a=Object(q.h)((function(t){return t.automaticJobsStatus})),r=Object(q.h)((function(t){return t.automaticJobsInProgress})),o=n?M.a.createElement(Qe,{automaticJobsInProgress:r,status:a}):M.a.createElement(Ye,{status:r,icon:a});return M.a.createElement(M.a.Fragment,null,a&&o)}),Ye=function(t){var e=t.status,n=t.icon;return M.a.createElement(M.a.Fragment,null,M.a.createElement(He.a,null,M.a.createElement(Ke.a,{className:"jobs-status-space",size:[16,0]},M.a.createElement($e,{status:n}),M.a.createElement("h1",{className:"progress"},e>0?M.a.createElement("span",{className:"progress__number"},e):Ze(n)),e>0&&M.a.createElement("div",{className:"small-gray"},M.a.createElement(He.a,null,Object(k.a)("translations","sitepress")),M.a.createElement(He.a,null,Object(k.a)("left in the queue","sitepress"))))))},Ze=function(t){return"problem"===t?Object(k.a)("Translation on hold","sitepress"):Object(k.a)("No translations in the queue","sitepress")},Xe=function(t,e){return t>0?sprintf(Object(k.a)("%d translations left","sitepress"),t):Ze(e)},Qe=function(t){var e=t.automaticJobsInProgress,n=t.status,a=Object(q.g)((function(t){return t.notificationCenter})).updateNotification;return Object(B.useEffect)((function(){a({id:"jobs-left-to-translate",notification:{title:Xe(e,n),dotIcon:!0,isError:"problem"===n,order:7}})}),[]),null},$e=function(t){var e=t.status,n="wpml-auto-translate-status__dot",a={inProgress:"".concat(n,"_in-progress"),complete:"".concat(n,"_complete"),problem:"".concat(n,"_problem")};return M.a.createElement("span",{className:"".concat(n," ").concat(a[e])})},tn=n(1342),en=(n(410),n(144)),nn=n(73),an=function(){return M.a.createElement("svg",{width:"27",height:"30",viewBox:"0 0 27 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.a.createElement("path",{d:"M25.4737 0H1.52631C0.868418 0 0.342102 0.526316 0.342102 1.18421V28.8158C0.342102 29.4737 0.868418 30 1.52631 30H17.9737C18.2368 30 18.5 29.8684 18.7632 29.7368L26.2632 23.2895C26.5263 23.0263 26.6579 22.7632 26.6579 22.3684V1.18421C26.6579 0.526316 26.1316 0 25.4737 0ZM22.1842 23.4211L19.1579 26.1842V23.4211H22.1842ZM24.1579 2.36842V21.3158H17.9737C17.3158 21.3158 16.7895 21.7105 16.6579 22.5V27.7632H2.71052V2.36842H24.1579Z",fill:"#47A5BF"}),M.a.createElement("path",{d:"M18.4777 10.7245H8.52234C7.88722 10.7245 7.37234 10.2096 7.37234 9.57447V9.57447C7.37234 8.93934 7.88722 8.42447 8.52234 8.42447H18.4777C19.1128 8.42447 19.6277 8.93934 19.6277 9.57447V9.57447C19.6277 10.2096 19.1128 10.7245 18.4777 10.7245Z",fill:"#47A5BF"},M.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})),M.a.createElement("path",{d:"M18.4777 16.15H8.52234C7.88722 16.15 7.37234 15.6351 7.37234 15V15C7.37234 14.3649 7.88722 13.85 8.52234 13.85H18.4777C19.1128 13.85 19.6277 14.3649 19.6277 15V15C19.6277 15.6351 19.1128 16.15 18.4777 16.15Z",fill:"#47A5BF"},M.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})),M.a.createElement("path",{d:"M13.6585 21.5755H8.52231C7.88719 21.5755 7.37231 21.0607 7.37231 20.4255V20.4255C7.37231 19.7904 7.88719 19.2755 8.52231 19.2755H13.6585C14.2936 19.2755 14.8085 19.7904 14.8085 20.4255V20.4255C14.8085 21.0607 14.2936 21.5755 13.6585 21.5755Z",fill:"#47A5BF"},M.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})))},rn=function(){var t=Object(q.h)((function(t){return t.automaticJobsInProgressTotal})),e=M.a.createElement("span",null,Object(k.a)("Preparing more content for translation","sitepress")),n=M.a.createElement("span",null,Object(k.a)("Preparing content for translation","sitepress"));return M.a.createElement("div",{className:"sending"},M.a.createElement(an,null),"Â ",t>0?e:n)},on=(n(1251),function(){return M.a.createElement("div",{className:"wpml-card-heading-icon wpml-lightning-icon"},M.a.createElement("span",null,M.a.createElement("svg",{width:"16",height:"22",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.a.createElement("path",{d:"M3.79996 20.975C3.79996 21.2375 4.06246 21.5 4.45621 21.5C4.71871 21.5 4.98121 21.3687 5.24371 21.2375L15.4812 9.55625C16.0062 8.9 16.0062 7.85 15.35 7.325C14.9562 7.0625 14.5625 6.93125 14.1687 6.93125H9.18121L13.1187 0.5H5.50621L0.518709 9.425C-0.137541 10.475 0.256209 11.7875 1.30621 12.3125C1.69996 12.4438 1.96246 12.575 2.35621 12.575H6.68746L3.79996 20.5813V20.975Z",fill:"#47A5BF"}))))}),sn=n(1322),cn=(n(132),n(105),n(1252),n(1351)),un=n(1350),ln=(n(561),n(145),n(393)),dn=(n(69),function(){var t=Object(q.h)(Object(E.a)("credits")),e=Object(q.h)(Object(E.a)("fetchingCredits")),n=Object(q.g)(Object(E.a)("fetchCredits"));return Object(B.useEffect)((function(){t||n()}),[]),M.a.createElement(M.a.Fragment,null,t?t.error?M.a.createElement(gn,null):M.a.createElement(fn,{credits:t,isFetching:e}):"")}),fn=function(t){var e=t.credits,n=t.isFetching;return M.a.createElement("div",{style:{minHeight:"50px"}},n?M.a.createElement(ln.a,{spinning:!0}):M.a.createElement(en.a,null,M.a.createElement(nn.a,{span:10},M.a.createElement(pn,{credits:e})),e.active_subscription&&M.a.createElement(nn.a,{span:12,offset:2},M.a.createElement(bn,{credits:e}))))},pn=function(t){var e=t.credits,n=e.available_balance>e.subscription_max_limit?e.available_balance-e.subscription_max_limit:0,a=M.a.createElement("p",{style:{width:150}},Object(k.a)("Remaining prepaid credits that are assigned to this site on WPML.org.","sitepress"));return M.a.createElement(un.a,{overlayClassName:"ant-popover-dark",title:null,content:a},M.a.createElement(en.a,null,M.a.createElement(nn.a,{className:"wpml-credit"},M.a.createElement("span",null,M.a.createElement("strong",null,n)))),M.a.createElement(en.a,null,M.a.createElement(cn.b,{className:"small-gray"},Object(k.a)("Prepaid credits left","sitepress"))))},bn=function(t){var e=t.credits,n=e.pay_as_you_go?M.a.createElement("strong",null,e.subscription_usage):M.a.createElement(M.a.Fragment,null,M.a.createElement("strong",null,e.subscription_usage)," / ",e.subscription_max_limit),a=e.pay_as_you_go?M.a.createElement(hn,null):M.a.createElement(mn,{credits:e});return M.a.createElement(un.a,{overlayClassName:"ant-popover-dark",title:null,content:a},M.a.createElement(en.a,null,M.a.createElement(nn.a,{className:"wpml-subscription"},M.a.createElement("span",null,n))),M.a.createElement(en.a,null,M.a.createElement(cn.b,{className:"small-gray"},e.pay_as_you_go?Object(k.a)("Pay-as-you-go credits used","sitepress"):Object(k.a)("Account credits used","sitepress"))))},mn=function(t){var e=t.credits;return M.a.createElement(M.a.Fragment,null,M.a.createElement("p",{style:{width:250}},Object(k.a)("Once youâve used all your prepaid credits, weâll invoice you for any additional credits you use after the end of the month","sitepress")),M.a.createElement("table",null,M.a.createElement("tbody",null,M.a.createElement("tr",null,M.a.createElement("td",null,Object(k.a)("Payment limit:","sitepress")),M.a.createElement("td",null,Object(k.c)(Object(k.a)("%s credits","sitepress"),e.subscription_max_limit))),M.a.createElement("tr",null,M.a.createElement("td",null,Object(k.a)("Credits used:","sitepress")),M.a.createElement("td",null,e.subscription_usage)),M.a.createElement("tr",null,M.a.createElement("td",null,Object(k.a)("Credits left:","sitepress")),M.a.createElement("td",null,e.subscription_max_limit-e.subscription_usage)))))},hn=function(){return M.a.createElement("p",{style:{width:250}},Object(k.a)("The number of credit you will receive an invoice for at the end of the month. View your pay-as-you-go details in your siteâs automatic translation settings.","sitepress"))},gn=function(){return M.a.createElement(M.a.Fragment,null,Object(k.a)("Calculating","sitepress")," ",M.a.createElement(ln.a,{size:"small",spinning:!0}))},vn=(n(1253),function(){var t=Object(q.h)((function(t){return t.shouldTranslateEverything})),e=Object(q.h)((function(t){return t.automaticJobsInProgressTotal})),n=t?Object(k.a)("Your site is being automatically translated!","sitepress"):Object(k.a)("Automatic translation status","sitepress"),a=M.a.createElement(en.a,{className:"has-jobs"},M.a.createElement(nn.a,null,M.a.createElement(ze,null)),t&&M.a.createElement(nn.a,null,M.a.createElement(rn,null))),r=M.a.createElement(en.a,{className:"has-no-jobs",align:"middle"},M.a.createElement(nn.a,null,t&&M.a.createElement(wn,{text:Object(k.a)("Calculating...","sitepress")})),M.a.createElement(nn.a,null,t&&M.a.createElement(rn,null)));return M.a.createElement(M.a.Fragment,null,M.a.createElement(yn,{heading:n}),M.a.createElement(en.a,{className:"wpml-auto-translate-status__content-info"},M.a.createElement(nn.a,{span:24,className:"status-first-column"},t&&0===e?r:a,M.a.createElement(en.a,{className:"credits"},M.a.createElement(nn.a,{span:24},M.a.createElement(dn,null))))))}),yn=function(t){var e=t.heading;return M.a.createElement(en.a,{align:"middle"},M.a.createElement(nn.a,{style:{display:"flex",alignItems:"center"},span:24},M.a.createElement(on,null),M.a.createElement("h3",null,e)))},jn=function(){return M.a.createElement("div",{className:"do-not-close"},Object(k.a)("Do not close WP admin!","sitepress"))},wn=function(t){var e=t.text;return M.a.createElement(M.a.Fragment,null,M.a.createElement("h1",{className:"progress"},e),M.a.createElement("div",{className:"small-gray",style:{display:"inline-block"}},Object(k.a)("The number of translations","sitepress")))},On=function(){var t=Object(q.h)(Object(E.a)("shouldTranslateEverything")),e=Object(ct.a)(Object(k.a)("Change your <a>automatic translation settings</a> (in-progress translation jobs will be completed with the current settings).","sitepress"),{a:M.a.createElement("a",{href:ate_jobs_sync.urls.automaticSettings})});return M.a.createElement(en.a,{className:"wpml-auto-translate-status__footer"},M.a.createElement(sn.a,null),t&&M.a.createElement(en.a,null,M.a.createElement("p",{className:"small-gray"},M.a.createElement("a",{href:ate_jobs_sync.urls.translateAutomaticallyDoc},Object(k.a)("Read more about translating your site automatically.","sitepress")))),M.a.createElement(en.a,null,M.a.createElement("p",{className:"small-gray"},e)))},En=function(t){var e=t.status,n=void 0===e?M.a.createElement(vn,null):e,a=Object(q.h)((function(t){return t.isAutomaticTranslations})),r=Object(q.h)((function(t){return t.shouldTranslateEverything}));return M.a.createElement(M.a.Fragment,null,M.a.createElement(tn.a,{className:"wpml-auto-translate-status"},M.a.createElement(en.a,{gutter:[0,16],className:"wpml-auto-translate-status__row"},M.a.createElement(nn.a,{span:24,md:13,className:"wpml-auto-translate-status__content"},n),M.a.createElement(nn.a,{span:24,md:11,className:"wpml-auto-translate-status__notices"},r&&M.a.createElement(en.a,{justify:"end"},M.a.createElement(jn,null)),M.a.createElement(Rt,{context:"dashboard"}))),!a&&M.a.createElement(On,null)))},kn=(n(1254),function(){Object(B.useEffect)((function(){document.dispatchEvent(new Event("WPMLManualTranslationStatusIsVisible"))}),[]);var t=Object(ct.a)(Object(k.a)("Read more about how to translate your content in the <a>Getting Started Guide</a>","sitepress"),{a:M.a.createElement("a",{href:"https://wpml.org/documentation/getting-started-guide/",target:"_blank",className:"wpml-external-link",rel:"noreferrer"})});return M.a.createElement(tn.a,{className:"wpml-manual-translation-status"},M.a.createElement(en.a,null,M.a.createElement(nn.a,{span:16},M.a.createElement("h4",null,Object(k.a)("Let's Start Translating!","sitepress")),M.a.createElement("p",null,Object(k.a)("Choose your content from the Translation Dashboard below and create your first translation job!","sitepress")),M.a.createElement("p",null,t)),M.a.createElement(nn.a,{span:8},M.a.createElement("div",{id:"wpml-manual-translation-status-notice"}))))}),Sn=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector("#wpml-auto-translate > .content"))){t.next=10;break}return t.next=4,We(ate_jobs_sync,G);case 4:a=t.sent,r=Fe(),o=!(null!==(n=ate_jobs_sync)&&void 0!==n&&n.anyJobsExist),(r||o)&&(document.getElementById("wpml-auto-translate").style.display="block"),i=r?M.a.createElement(En,null):o?M.a.createElement(kn,null):M.a.createElement(M.a.Fragment,null),F.a.render(M.a.createElement(q.a,{store:a},i),e);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_n=n(113),Cn=n(382),Tn=function(t){return t.closest("td")},xn=function(t){var e=function(t){t.checked=!1,t.disabled=!0;var e=Tn(t);e.setAttribute("title",Object(k.a)("This content is being automatically translated. If you want to do something different with it cancel translation jobs first.","sitepress")),e._tippy||Object(C.a)(e,"otgs")},n=function(){var t=[Se.b.COMPLETED,Se.b.CANCELLED];Object(b.a)(Object(m.a)((function(t){return parseInt(t.dataset.tmJobId)})),Object(g.a)((function(n){var a,r=(a=n.dataset.tmJobId,document.querySelector('.js-wpml-translate-link[data-tm-job-id="'.concat(a,'"]')).closest("tr").querySelector('input[type="checkbox"]'));"1"!==n.dataset.automatic||Object(_n.a)(parseInt(n.dataset.document_status),t)?function(t){t.disabled=!1;var e=Tn(t);e.removeAttribute("title"),e._tippy&&e._tippy.destroy()}(r):e(r)})))(document.querySelectorAll("span.js-wpml-translate-link"))};t.addAction("wpml-tm-ate-after-sync","updateJobs",n),Object(Cn.b)("translate-everything-running").then((function(t){return t?Object(g.a)(e,document.querySelectorAll('#icl-tm-translation-dashboard tr input[type="checkbox"]')):n()}))},An=(n(1255),n(46)),In=n.n(An),Pn=n(865),Nn=n(93),Dn=n.n(Nn),Ln=n(26),Jn=function(){var t=Object(q.h)(Pn.a).success,e=Object(q.g)(Pn.a).enable;return Object(B.useEffect)((function(){e()}),[]),Object(B.useEffect)((function(){t&&Object(Ht.a)("ateEnabled")}),[t]),M.a.createElement(M.a.Fragment,null,!t&&M.a.createElement(En,{status:M.a.createElement(Rn,null)}))},Rn=function(){var t=Object(q.g)(Pn.a).enable,e=Object(q.h)(Pn.a),n=e.enabling,a=e.failedMessage,r=n?Object(k.a)("Connecting to WPMLâs Advanced Translation Editor","sitepress"):Object(E.a)("header",a),o=M.a.createElement(M.a.Fragment,null,M.a.createElement(In.a,{span:1,offset:1},M.a.createElement(Dn.a,{spinning:!0}))),s=M.a.createElement(M.a.Fragment,null,M.a.createElement(In.a,{offset:1},M.a.createElement("div",{className:"wpml-error"},M.a.createElement("p",{dangerouslySetInnerHTML:{__html:Object(E.a)("description",a)}}),M.a.createElement(Ln.a,{type:"error",onClick:t},Object(k.a)("Try again","sitepress")))));return M.a.createElement(M.a.Fragment,null,M.a.createElement(yn,{heading:r}),M.a.createElement(He.a,null,n?o:s))},Bn=Object(q.d)({shouldTranslateEverything:!0,enabling:!1,setEnabling:Object(Vt.a)("enabling"),enable:Object(q.e)(function(){var t=c()(s.a.mark((function t(e){var n,a,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setEnabling(!0),t.next=3,Object(_.a)(Object(E.a)("enableATE",ate_jobs_sync.endpoints),{});case 3:n=t.sent,a=n.data,r=a.success,o=a.data,e.setEnabling(!1),e.setSuccess(r),!r&&e.setFailedMessage(Object(u.a)([],"error",o));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),success:!1,setSuccess:Object(Vt.a)("success"),failedMessage:"",setFailedMessage:Object(Vt.a)("failedMessage")}),Mn=function(t){return(e=t.parentNode,n="span",a=document.createElement(n),a.innerHTML=e.innerHTML,e.parentNode.replaceChild(a,e),a).children[0];var e,n,a},Wn=function(t){t.setAttribute("title",Object(k.a)("You don't have the rights to review this language","sitepress")),Object(C.a)(t,"otgs")},Fn=function(){d()(document.querySelectorAll('.js-wpml-translate-link[data-user-can-translate="no"] i')).filter((function(t){return t.classList.contains("otgs-ico-needs-review")})).map(Mn).map(Wn)},qn=function(){Fn(),Object(Ht.b)("job-link-updated").then(Fn),d()(document.querySelectorAll(".js-wpml-translate-link")).forEach((function(t){t.addEventListener("click",(function(){return localStorage.setItem("continueReview",!1),!1}))}))},Un=function(){var t=c()(s.a.mark((function t(){var e,n,a,r,o,i,c=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]&&c[1],t.next=4,Object(_.a)(ate_jobs_sync.endpoints.assignToTranslation,{page:e,lockKey:n});case 4:if(!(a=t.sent).data.success){t.next=9;break}if(r=a.data.data,o=r.nextPage,i=r.lockKey,!(o>e&&i)){t.next=9;break}return t.abrupt("return",Un(o,i));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Gn=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)(ate_jobs_sync.endpoints.assignToTranslation,{firstSchedule:!0});case 2:t.sent.data.success||setTimeout((function(){return Gn}),2e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Hn=Un,Vn=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)(ate_jobs_sync.endpoints.invalidateLangMappingCache,{});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ate_jobs_sync.ateCallbacks.retranslation=Gn,ate_jobs_sync.ateCallbacks.invalidateCache=Vn;var Kn=function(){var t=c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(),ate_jobs_sync.shouldCheckForRetranslation&&Hn(),"1"===ate_jobs_sync.isTranslationManager&&"1"===ate_jobs_sync.isAutomaticTranslations&&xn(G,ate_jobs_sync),t.next=5,Sn();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",c()(s.a.mark((function t(){var e,n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(ate_jobs_sync,G);case 2:if(e=t.sent,qn(),n="undefined"!=typeof wpml_background_tasks&&Object.keys(Object(u.a)({},"tasks",wpml_background_tasks)).length>0,a="1"===ate_jobs_sync.isTranslationManager&&"1"===ate_jobs_sync.isAteActive,r=n||a,!(a||r)){t.next=11;break}return t.next=11,Ue(r,a);case 11:"1"===ate_jobs_sync.isAteActive?Kn():"ATE"===ate_jobs_sync.editorMode&&"1"===ate_jobs_sync.isAutomaticTranslations&&(o=void 0,(o=document.querySelector("#wpml-auto-translate > .connect"))&&(o.parentNode.style.display="block",F.a.render(M.a.createElement(q.a,{store:Bn},M.a.createElement(Jn,null)),o)),Object(Ht.b)("ateEnabled").then(Kn).then((function(){return e.getActions().languages.fetchLanguages()})));case 12:case"end":return t.stop()}var o}),t)}))))},132:function(t,e,n){},14:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"r",(function(){return b})),n.d(e,"q",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"n",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"f",(function(){return j})),n.d(e,"e",(function(){return w})),n.d(e,"l",(function(){return O})),n.d(e,"k",(function(){return E})),n.d(e,"o",(function(){return k})),n.d(e,"m",(function(){return S})),n.d(e,"j",(function(){return _})),n.d(e,"i",(function(){return C})),n.d(e,"p",(function(){return T})),n.d(e,"g",(function(){return x}));var a=n(51),r=n(526),o=n(527),s=n(39),i=n(113),c=n(48),u=n(131),l=n(396),d=n(202),f={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},p={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},b=Object(a.a)("type","post"),m=Object(a.a)("type","package"),h=Object(r.a)([Object(a.a)("review_status","NEEDS_REVIEW"),Object(a.a)("review_status","EDITING")]),g=function(t){return!!v(t)&&(t.status===f.WAITING_FOR_TRANSLATOR||t.status===f.IN_PROGRESS)},v=function(t){return"local"===t.translation_service_id},y=function(t){return!v(t)&&(t.status===f.IN_PROGRESS||t.status===f.COMPLETED)&&t.batch.tp_id&&!t.isBatchSynced},j=function(t){return!v(t)&&(Object(s.a)("status",t)===f.TRANSLATION_READY_TO_DOWNLOAD||Object(s.a)("status",t)===f.COMPLETED)},w=function(t){return!v(t)&&Object(i.a)(Object(s.a)("status",t),[f.TRANSLATION_READY_TO_DOWNLOAD,f.COMPLETED])},O=Object(c.a)(Object(s.a)("status"),Object(i.a)(u.a,[f.WAITING_FOR_TRANSLATOR,f.IN_PROGRESS])),E=function(t){return e=t.automatic,Object(o.a)(String,e)?"0"!==e&&"false"!==e:!!e;var e},k=Object(l.a)(E),S=function(t,e){return t.id===e.id&&t.type===e.type},_=function(t,e){return void 0!==t.find((function(t){return t.status===e}))},C=function(t){return Object(d.a)(0,["extra_data","icl_translate_job_id"],t)},T=function(t){return!(!t.deadline||!O(t))&&new Date>new Date(t.deadline)},x=function(t,e){return t&&t.id===parseInt(e.translation_service_id)}},145:function(t,e,n){},148:function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var a=n(501),r=n.n(a),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wpml",n="rtl"===document.getElementsByTagName("html")[0].dir,a={arrow:!0,theme:e,animation:"fade",sticky:!0,interactive:!0,dynamicTitle:!0,placement:n?"top-end":"top-start"};r()(t,a)};e.a=o;var s=function(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),o(t,"otgs")}},186:function(t,e,n){},382:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var a=n(30),r=n.n(a),o=n(449),s=n(447),i=n(48),c=Object(o.a)("WPML-"),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent(c(t),{detail:e}))},l=function(t){var e=[],n={then:function(t){return e=Object(s.a)(t,e),this}};return document.addEventListener(c(t),(function(t){i.a.apply(void 0,r()(e))(t.detail)})),n}},383:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(15),c=n.n(i),u=n(18),l=n.n(u),d=n(16),f=n(202),p=function(){function t(e){c()(this,t),this.endpoint=e}var e;return l()(t,[{key:"get",value:(e=s()(r.a.mark((function t(){var e,n,a,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(o.length>0&&void 0!==o[0])||o[0],t.next=3,Object(d.a)(this.endpoint,{withCache:e});case 3:return n=t.sent,a=function(t){return parseInt(Object(f.a)(0,["data","data",t],n))},t.abrupt("return",{allCount:a("allCount"),allAutomaticCount:a("allAutomaticCount"),automaticWithoutLongstandingCount:a("automaticWithoutLongstandingCount"),needsReviewCount:a("needsReviewCount")});case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},410:function(t,e,n){},423:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var a=n(13),r=n.n(a),o=n(3),s=n.n(o),i=n(9),c=n.n(i),u=n(7),l=n.n(u),d=n(30),f=n.n(d),p=n(15),b=n.n(p),m=n(18),h=n.n(m),g=n(505),v=n.n(g),y=n(506),j=n.n(y),w=n(507),O=n.n(w),E=n(48),k=n(39),S=n(113),_=n(131),C=n(63),T=n(399),x=n(51),A=n(873),I=n(877),P=n(71),N=n(874),D=n(396),L=n(201),J=n(397),R=n(525),B=n(398),M=n(14);n(127);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q=E.a(k.a("ateStatus"),S.a(_.a,[M.a.TRANSLATED,M.a.DELIVERING,M.a.EDITED]));function U(t){return new Promise((function(e){return setTimeout(e,t)}))}var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;b()(this,t),this.insufficientBalanceJobs=e,this.stillInProgressJobs=n,this.downloaded=a,this.notDownloaded=r,this.lockKey=o}return h()(t,[{key:"prepandPrevioslyDownloadedJobs",value:function(e){return new t(this.insufficientBalanceJobs,this.stillInProgressJobs,[].concat(f()(e),f()(this.downloaded)),this.notDownloaded,this.lockKey)}}]),t}(),H=function(){function t(e){var n=e.synchronize,a=e.download,r=e.releaseLock,o=e.listeners,s=(o=void 0===o?{}:o).onInsufficientBalance,i=void 0===s?[]:s,c=o.onDownloadedChunk,u=void 0===c?[]:c,l=o.onSyncDownloadCycleCompleted,d=void 0===l?[]:l,f=o.onSyncDownloadCompleted,p=void 0===f?[]:f,m=o.onSyncStart,h=void 0===m?[]:m,g=o.onSyncLocked,v=void 0===g?[]:g,y=e.getJobsCount,j=e.repeatTimeouts,w=(j=void 0===j?{}:j).sync,O=void 0===w?5e3:w,E=j.syncDelayed,k=void 0===E?1e4:E,S=j.syncIsLockedDelay,_=void 0===S?6e4:S;b()(this,t),this.synchronize=n,this.download=a,this.releaseLock=r,this.getJobsCount=y,this.onInsufficientBalance=i,this.onDownloadedChunk=u,this.onSyncStart=h,this.onSyncDownloadCycleCompleted=d,this.onSyncDownloadCompleted=p,this.onSyncLocked=v,this.repeatTimeouts={sync:O,syncDelayed:k,syncIsLockedDelay:_}}var e,n,a,r,o,i,u;return h()(t,[{key:"syncSinglePage",value:(u=l()(s.a.mark((function t(){var e,n,a,r,o,i,u,l,d,f,p,b=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b.length>0&&void 0!==b[0]?b[0]:{},t.next=3,this.synchronize(e);case 3:return n=t.sent,a=C.a([],"jobs",n),r=T.a(x.a("ateStatus",M.a.NO_CREDIT),a),o=c()(r,2),i=o[0],u=o[1],l=T.a(q,u),d=c()(l,2),f=d[0],p=d[1],i.length&&this.onInsufficientBalance.forEach((function(t){return t(i)})),t.abrupt("return",{insufficientBalanceJobs:i,readyToDownloadJobs:f,stillInProgressJobs:p,response:n});case 9:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"synchronizeAllPages",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return O()(s.a.mark((function a(){var r,o,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n?{lockKey:n}:{},o={};case 2:return o=A.a(["lockKey","ateToken","nextPage","numberOfPages"],r),a.next=5,j()(t.syncSinglePage(F(F({},o),{},{includeManualAndLongstandingJobs:e})));case 5:return i=a.sent,r=i.response,a.next=9,{insufficientBalanceJobs:i.insufficientBalanceJobs||[],readyToDownloadJobs:i.readyToDownloadJobs||[],stillInProgressJobs:i.stillInProgressJobs||[],lockKey:k.a("lockKey",r)};case 9:if(C.a(!1,"ateToken",r)){a.next=2;break}case 10:case"end":return a.stop()}}),a)})))()}},{key:"downloadSingleBatch",value:(i=l()(s.a.mark((function t(e,n){var a,r,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=I.a(parseInt),t.prev=1,t.next=4,this.download(e,n);case 4:return r=t.sent,r=P.a(N.a({jobId:a,status:a}),r),o=function(t){var e=r.find(x.a("jobId",t.jobId));return e?F(F({},t),e):t},i=E.a(P.a(o),T.a(x.a("status",M.b.COMPLETED)))(e),u=c()(i,2),l=u[0],d=u[1],t.abrupt("return",{downloadedJobs:l,notDownloaded:d});case 11:return t.prev=11,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",{notDownloaded:e,downloadedJobs:[]});case 15:case"end":return t.stop()}}),t,this,[[1,11]])}))),function(t,e){return i.apply(this,arguments)})},{key:"downloadAll",value:(o=l()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l,d,p=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=D.a(x.a("status",M.b.COMPLETED)),r=[],o=[],i=L.a(J.a(q,a),e),c=R.a(5,i),u=R.a((b=void 0,m=void 0,"undefined"==typeof ate_jobs_sync||null===ate_jobs_sync?2:(null===(b=ate_jobs_sync)||void 0===b||null===(m=b.settings)||void 0===m?void 0:m.numberOfParallelDownloads)||2),c),l=s.a.mark((function t(e){var a,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(P.a((function(t){return p.downloadSingleBatch(t,n)}),u[e]));case 2:if(a=t.sent,i=B.a(P.a(k.a("downloadedJobs"),a)),c=B.a(P.a(k.a("notDownloaded"),a)),!i.length||!p.onDownloadedChunk.length){t.next=8;break}return t.next=8,Promise.all(P.a((function(t){return t(i,parseInt(e))}),p.onDownloadedChunk));case 8:r.push.apply(r,f()(i)),o.push.apply(o,f()(c));case 10:case"end":return t.stop()}}),t)})),t.t0=s.a.keys(u);case 8:if((t.t1=t.t0()).done){t.next=13;break}return d=t.t1.value,t.delegateYield(l(d),"t2",11);case 11:t.next=8;break;case 13:return t.abrupt("return",{downloaded:r,notDownloaded:o});case 14:case"end":return t.stop()}var b,m}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"syncAndDownloadCycle",value:(r=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d,p,b,m,h,g,y=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!(y.length>0&&void 0!==y[0])||y[0],n=y.length>1&&void 0!==y[1]?y[1]:null,a=[],r=[],o=[],i=[],c=n,u=!0,l=!1,t.prev=9,p=v()(this.synchronizeAllPages(e,c));case 11:return t.next=13,p.next();case 13:return b=t.sent,u=b.done,t.next=17,b.value;case 17:if(m=t.sent,u){t.next=32;break}if(h=m,a.push.apply(a,f()(h.insufficientBalanceJobs)),r.push.apply(r,f()(h.stillInProgressJobs)),c=h.lockKey,!h.lockKey){t.next=29;break}return t.next=26,this.downloadAll(h.readyToDownloadJobs,h.lockKey);case 26:g=t.sent,o.push.apply(o,f()(g.downloaded)),i.push.apply(i,f()(g.notDownloaded));case 29:u=!0,t.next=11;break;case 32:t.next=38;break;case 34:t.prev=34,t.t0=t.catch(9),l=!0,d=t.t0;case 38:if(t.prev=38,t.prev=39,u||null==p.return){t.next=43;break}return t.next=43,p.return();case 43:if(t.prev=43,!l){t.next=46;break}throw d;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",new G(a,r,o,i,c));case 49:case"end":return t.stop()}}),t,this,[[9,34,38,48],[39,,43,47]])}))),function(){return r.apply(this,arguments)})},{key:"syncAndDownload",value:(a=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d=this,f=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f.length>0&&void 0!==f[0]?f[0]:{},n=e.suspendCycleRepeat,a=void 0!==n&&n,this.onSyncStart.forEach((function(t){return t()})),i=1,c=!0,u=null,l=s.a.mark((function t(){var e,n,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.syncAndDownloadCycle(c,u);case 2:return n=t.sent,o=n.prepandPrevioslyDownloadedJobs((null===(e=o)||void 0===e?void 0:e.downloaded)||[]),u=n.lockKey||null,c=!u,t.next=8,d.getJobsCount.get();case 8:return l=t.sent,t.next=11,Promise.all(d.onSyncDownloadCycleCompleted.map((function(t){return t(l,n)})));case 11:if(!a){t.next=17;break}if(t.t0=u,!t.t0){t.next=16;break}return t.next=16,d.releaseLock(n.lockKey);case 16:return t.abrupt("return","break");case 17:if(!u){t.next=23;break}return t.next=20,d._shouldRetryWithLock(i,n,l);case 20:t.t1=t.sent,t.next=26;break;case 23:return t.next=25,d._shouldRetryWithoutLock(i,l,r);case 25:t.t1=t.sent;case 26:i=t.t1,r=l;case 28:case"end":return t.stop()}}),t)}));case 6:return t.delegateYield(l(),"t0",7);case 7:if("break"!==t.t0){t.next=10;break}return t.abrupt("break",11);case 10:if(i){t.next=6;break}case 11:return this.onSyncDownloadCompleted.forEach((function(t){return t(o)})),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_shouldRetryWithLock",value:(n=l()(s.a.mark((function t(e,n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.automaticWithoutLongstandingCount<=n.insufficientBalanceJobs.length||e>=10)){t.next=4;break}return t.next=3,this.releaseLock(n.lockKey);case 3:return t.abrupt("return",!1);case 4:return e=n.downloaded.length>0?1:e+1,r=n.downloaded.length>0?this.repeatTimeouts.sync:e*this.repeatTimeouts.syncDelayed,t.next=8,U(r);case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,a){return n.apply(this,arguments)})},{key:"_shouldRetryWithoutLock",value:(e=l()(s.a.mark((function t(e,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.automaticWithoutLongstandingCount<=0)){t.next=2;break}return t.abrupt("return",!1);case 2:if(!((e=!a||a.automaticWithoutLongstandingCount>n.automaticWithoutLongstandingCount?1:e+1)>=3)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,U(this.repeatTimeouts.syncIsLockedDelay);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)}))),function(t,n,a){return e.apply(this,arguments)})}]),t}()},431:function(t,e,n){"use strict";var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(15),c=n.n(i),u=n(18),l=n.n(u),d={createJob:"/wpml/tm/v1/ate/jobs",sync:"/wpml/tm/v1/ate/jobs/sync",retry:"/wpml/tm/v1/ate/jobs/retry",download:"/wpml/tm/v1/ate/jobs/download",fixJobStatus:function(t,e){return"/wpml/tm/v1/ate/jobs/".concat(t,"/fix?jobId=").concat(e)},getJobStatus:function(t){return"/wpml/tm/v1/ate/jobs/".concat(t)}},f=function(){function t(e){c()(this,t),this.request=e}var e,n,a;return l()(t,[{key:"createJob",value:function(t){var e=t.xliff,n=t.returnURL,a=e.sourceLang,r=e.targetLang,o=e.content;return this.request.post(d.createJob,{source_language:a,target_language:r,file:{name:"some_page_en_fr.xliff",type:"data:application/x-xliff;base64",content:o},return_url:n})}},{key:"getJobStatus",value:function(t){return this.request.get(d.getJobStatus(t))}},{key:"fixJobStatus",value:function(t,e){return this.request.get(d.fixJobStatus(t,e))}},{key:"sync",value:(a=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.sync,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"retry",value:(n=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.retry,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"download",value:(e=s()(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.download,{jobs:e,lockKey:n}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}();e.a=f},56:function(t,e,n){},561:function(t,e,n){},69:function(t,e,n){},79:function(t,e,n){"use strict";var a=n(15),r=n.n(a),o=function t(e){r()(this,t),this.ID=e.ID,this.caps=e.caps,this.roles=e.roles,this.user_email=e.data,this.user_login=e.data.user_email,this.user_nicename=e.data.user_login};e.a=function t(){r()(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new o(WPML_TM_SETTINGS.currentUser)}},839:function(t,e,n){},88:function(t,e,n){"use strict";var a=n(3),r=n.n(a),o=n(7),s=n.n(o),i=n(15),c=n.n(i),u=n(18),l=n.n(u),d=n(37),f=n.n(d),p=n(44),b=n.n(p),m=n(40),h=n.n(m),g=n(79),v=n(82);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}Object(v.a)();var j=function(t){f()(a,t);var e,n=y(a);function a(){return c()(this,a),n.apply(this,arguments)}return l()(a,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",e)}},{key:"download",value:(e=s()(r.a.mark((function t(e){var n=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,this.generateArgs("GET")).then((function(t){return t.ok?t.blob():n.buildError(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.generateArgs(e,n);return this.restUrl.includes("?")&&(t=t.replace("?","&")),this.handleRequest(this.restUrl+t,a)}},{key:"handleRequest",value:function(t,e){var n=this;return fetch(t,e).then((function(t){return t.ok?t.json():n.buildError(t)}))}},{key:"generateArgs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==n.method&&e&&(n.body="string"==typeof e?e:JSON.stringify(e)),n}},{key:"buildError",value:function(t){return t.json().then((function(e){var n=new Error(e.message||t.statusText);return Promise.reject(Object.assign(n,{response:t}))}))}}]),a}(g.a);e.a=j}});